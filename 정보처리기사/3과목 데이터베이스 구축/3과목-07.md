# 정보처리기사 공부(2022-02-22)

## 물리 데이터베이스 설계 C

### 파티션(Patition) 설계

* 개요
  * 대용량의 테이블이나 인덱스를 작은 논리적 단위인 파티션으로 나누는 것
* 장점
  * 파티션별로 데이터가 분산돼 저장되므로 디스크의 성능이 향상
  * 파티션별로 백업 및 복구를 수행하므로 속도가 빠름
  * 시스템 장애 시 데이터 손상 정도를 최소화할 수 있다.
* 단점
  * 세심한 관리가 요구
  * 테이블간 조인에 대한 비용이 증가
* 파티션 종류
  * 범위 분할(Range Partitioning)
    * 지정된 열의 값을 기준으로 분할
    * 예) 일별, 월별, 분기별
  * 해시 분할(Hash Partitioning)
    * 해시함수에 적용한 결과 값에 따라서 데이터를 분할
    * 고객번호, 주민번호와 같이 데이터가 고른 컬럼에 효과적
  * 조합 분할(Composite Partitioning)
    * 범위 분할로 분할한 뒤 해시 함수를 적용하는 분할 방식
* 인덱스 파티션
  * 파티션된 테이블의 종속 여부에 따라
    * Local
      * 테이블 파티션과 인덱스 파티션이 1:1로 대응
    * Global
      * 테이블 파티션과 인덱스 파티션이 서로 독립적으로 구성되도록 파티셔닝
    * Local이 Global에 비해 데이터 관리가 쉽다.
  * 인덱스 파티션키 컬럼의 위치에 따라
    * Prefixed
      * 인덱스 파티션 키와 인덱스 첫 번째 컬럼이 같다.
    * Non-Prefixed
      * 인덱스 파티션 키와 인덱스 첫 번째 컬럼이 다르다.



### 데이터베이스 용량 설계

* 데이터베이스 용량 설계
  * 데이터가 저장될 공간을 정의하는 것
* 데이터베이스 용량 설계의목적
  * 디스크 입출력 부하를 분산
  * 채널의 병목현상을 감소시킴
  * 데이터베이스에 생성되는 범위(Extent)를 최소화하여 성능 향상시키기 위함
  * 용량을 정확히 산정해 디스크의 저장 공간을 효과적으로 사용하고 확장성 및 가용성을 높임
* 데이터베이스 용량 분석 절차
  * 기초 자료를 수집해 용량을 분석
    * 예상 건수
    * Row의 길이
    * 보존 기간
    * 증가율
  * 오브젝트별 용량을 산정
    * 테이블, 인덱스의 테이블 스페이스 용량을 산정
    * 모든 테이블의 용량을 더하고 30%정도를 추가
    * DB에 저장될 모든 데이터 용량, 시스템 용량을 더해서 총 디스크 용량을 산정



### 분산 데이터베이스 설계

* 분산 데이터베이스 정의
  * 논리적으로는 하나의 시스템에 속함
  * 물리적으로는 네트워크를 통해 연결된 여러 개의 컴퓨터 사이트에 분산되어 있는 DB
* 구성 요소
  * 분산 처리기
  * 분산 데이터베이스
  * 통신 네트워크
* 설계 시 고려 사항
  * 작업 부하의 노드별 분산 정책
  * 지역의 자치성 보장 정책
  * 데이터의 일관성 정책
  * 회복 기능
  * 통신을 통한 접속 가능
* 분산 데이터베이스의 목표
  * 위치 투명성(Location Transparency)
    * 실제 위치를 알필요가 없어야 한다.
  * 중복 투명성(Replication Transparency)
    * 사용자가 마치 하나의 데이터만 있는 것으로 인식하게 
  * 병행 투명성(Concurrency Transparency)
    * 트랜잭션이 여러 사용자에게 동시에 실행되어도 계속해서 문제없이 진행이 되어야 한다.
  * 장애 투명성(Failure Transparency)
    * 컴퓨터에 장애가 있어도 트랜잭션은 정확하게 처리가 되어야한다.
* 장단점
  * 장점
    * 지역 자치성이 높다.
    * 공유성 향상
    * 분산 제어가 가능하다.
    * 시스템 성능이 향상된다.
    * 컴퓨터에 대한 장애가 전체 시스템에 영향을 끼치지 않는다.
    * 효율성과 융통성이 높다.
    * 점진적 시스템 용량 확장이 용이
  * 단점
    * 설계가 어렵다.
    * 소프트웨어 개발비용이 증가한다.
    * 처리비용이 증가한다.
    * 잠재적 오류가 증가한다.
* 분산 데이터베이스 설계
  * 애플리케이션이나 사용자가 분산되어 저장된 데이터에 접근하게 하는 것이 목적
* 테이블 위치 분산
  * 데이터베이스의 테이블을 각기 다른 서버에 분산시켜 배치하는 방법
* 분할(Fragment)
  * 테이블의 데이터를 분할하여 분산시키는 것
  * 분할 규칙 
    * 완전성(Completeness)
      * 전체 데이터를 대상으로 분할해야한다.
    * 재구성(Reconstruction)
      * 분할된 데이터는 관계 연산을 활용해서 본래의 데이터로 재구성이 가능해야한다.
    * 상호 중첩 배제(Dis-jointness)
      * 분할된 데이터는 서로 다른 분할 항목에 속하지 않아야 한다.
* 할당(Allocation)
  * 동일한 분할을 여러 개의 서버에 생성하는 분산 방법
  * 중복이 있게 할당하는 방법
  * 중복이 없게 할당하는 방법