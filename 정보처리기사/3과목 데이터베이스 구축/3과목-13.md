# 정보처리기사 공부(2022-02-22)

## SQL 활용 B

### DBMS 접속 기술

* DBMS 접속 개념
  * **사용자가 데이터베이스를 사용하기 위해서 DBMS에 접근하는 것**
* DBMS 접속 기술
  * **JDBC(Java DataBase Connect)**
    * 자바언어로 다양한 종류의 데이터베이스에 접속하는 것
    * SQL문을 수행할 때 사용되는 표준 API
    * 1997년에 MS에서 출시
    * java, sql 등이 포함
    * 드라이버가 필요
  * ODBC
    * 1992 MS에서 출시
    * 개발 언어에 관계 없이 사용 가능
  * MyBatis
    * SQL Mapping 기반 오픈 접속 프레임워크
* 동적 SQL(Dynamic SQL)
  * 개발 언어에 삽입되는 SQL코드를 문자열 변수에 넣어서 처리하는 것
  * 일부나 전부를 입력받아서 실행 가능
  * 값이 입력되지 않으면 NVL 함수를 사용할 필요가 없다.
    * NVL : A가 Null이면 B를 반환해라. 아니면, A를 반환을해라.
  * 정적 SQL에 비해서 속도가 느리지만, 상황에 따라서 다양한 조건을 첨가할 수 있어 유연성 개발이 가능하다.



### SQL 테스트

* 개요
  * SQL 작성의도에 맞게 원하는 기능을 수행하는지 검증하는 과정
  * 구문 오류나 참조 오류의 여부를 확인하기 위함
  * 디버깅을 통해서 로직을 검증
* 단문 SQL 테스트
  * DDL, DML, DCL 포함
  * SQL과 TCL 테스트
  * **DESCRIBE** : DDL로 작성된 TABLE, VIEW 자료형 옵션들을 바로 확인 가능하다.
    * DESC [개체명];
* 절차형 SQL 테스트
  * 오류나 경고메시지가 상세하게 출력되지는 않는다.
  * SHOW 라는 명령어를 통해 오류내용을 확인하고 수정할 수 있다.
    * SHOW ERRORS;





### ORM(Object-Relational Mapping)

* 개요
  * 객체 지향 프로그램의 객체와 관계형 DB의 데이터를 연결하는 기술
  * 가상의 객체지향 데이터베이스를 생성
    * 프로그래밍의 코드 <--연결--> 데이터
  * 독립적으로 사용되어 재사용이 가능하고 유지보수가 쉽다.
  * SQL를 직접입력하지 않아 선언문,할당 등이 생략된다.
  * 간단하게 데이터를 조작할 수 있다.
* ORM 프레임워크
  * JAVA - Hibernate, **EclipseLink**
  * C++ - ODB
  * Python - **Django**
  * iOS - DatabaseObjects
  * NET - Nhibernate
  * php - Doctrine
* ORM의 한계
  * SQL을 자동으로 작성
  * 그래서 의도한대로 SQL이 작성되었나 확인해야 한다.
  * DB가 아닌 경우, 프로젝트가 크고 복잡해질수록 ORM 적용이 어렵다.
  * 기업들은 ORM을 고려하지 않고, DB를 작성한다. 그래서 ORM에 맞게 변환하려면 많은 시간과 노력이 소요





### 쿼리 성능 최적화

* 개요
  * 성능 측정 도구(APM)를 이용해 최적화할 쿼리를 선정
    * APM : 성능 관리를 위해서 접속자, 자원현황, 트랜잭션 수행 내역, 장애진단 등을 제공하는 도구
  * Optimizer가 수립한 실행 계획을 검토
    * Optimizer : 작성된 SQL이 가장 효율적으로 수행되도록 최적의 경로를 찾아줌
* 실행 계획(Execution Plan)
  * EXPLAIN 명령어를 통해 확인 후 그래픽이나 텍스트로 표현
  * 실행 계획에는 연산 순서가 적혀져 있다.
    * 연산 : 조인, 검색, 필터, 정렬
* 쿼리 성능 최적화
  * SQL 코드 재구성
    * WHERE 절 일부만 조회
    * WHERE 절에 연산자가 포함이 되면은 INDEX를 활용할 수 없을 수도 있기 때문에 연산자는 가능한 자제해야한다.
    * 서브쿼리에 특정한 데이터가 존재하는지 확인할 때 IN보다는 EXISTS를 사용하자.(더 빠르기 때문에)
  * 인덱스 재구성
    * SQL 코드에서 조회되는 속성, 조건 등을 고려해서 인덱스를 구성
    * 추가, 변경은 다른 SQL에도 영향을 주기 때문에 신중하게 선정해야한다.

